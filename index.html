<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Toddler Learning App</title>
    <style>
        :root {
            --primary-bg: #FFEB3B;
            --sloka-bg: #FF9800;
            --tamil-bg: #4CAF50;
            --text-color: #212121;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            margin: 0;
            background-color: var(--primary-bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            color: var(--text-color);
        }

        /* Nav Links */
        .home-link {
            font-size: 1.2rem;
            margin: 15px 0;
            text-decoration: underline;
            cursor: pointer;
            font-weight: bold;
            color: #d32f2f;
        }

        /* Large Buttons */
        .btn {
            padding: 20px 40px;
            font-size: 1.8rem;
            border-radius: 20px;
            border: 4px solid #000;
            cursor: pointer;
            background: white;
            margin: 10px;
            font-weight: bold;
            box-shadow: 0 8px 0 #000;
            transition: 0.1s;
        }

        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #000;
        }

        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            text-align: center;
            padding: 10px;
            box-sizing: border-box;
        }

        .active { display: flex; }

        /* Progress Bar */
        .progress-container {
            width: 80%;
            background-color: #fff;
            border: 3px solid #000;
            border-radius: 25px;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 0%;
            height: 20px;
            background-color: #2196F3;
            border-radius: 20px;
            transition: width 0.3s;
        }

        /* Learning Card */
        .word-card {
            background: white;
            padding: 20px;
            border-radius: 30px;
            border: 5px solid #000;
            width: 90%;
            max-width: 450px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .word-img { width: 180px; height: 180px; object-fit: contain; margin-bottom: 10px; }
        
        /* Green Horizontal Play Button */
        .play-btn-green {
            background-color: #4CAF50;
            color: white;
            font-size: 1.5rem;
            width: 250px;
            padding: 15px;
            border-radius: 50px;
            border: 4px solid #000;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        .next-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #2196F3;
            color: white;
        }

        .sloka-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        #player { border: 5px solid #000; border-radius: 20px; background: #000; }
    </style>
</head>
<body>

    <div id="home-screen" class="screen active">
        <h1 style="font-size: 2.5rem;">Vannakam! üéà</h1>
        <button class="btn" style="background-color: var(--sloka-bg);" onclick="showScreen('sloka-screen')">Slokas üïâÔ∏è</button>
        <button class="btn" style="background-color: var(--tamil-bg);" onclick="showScreen('tamil-category-screen')">Learn Tamil üçé</button>
    </div>

    <div id="sloka-screen" class="screen">
        <div class="home-link" onclick="showScreen('home-screen')">üè† Home</div>
        <h2>Pick a Sloka</h2>
        <div class="sloka-grid">
            <div onclick="playSloka('G8G8WwGX0Qc', 54)">
                <img src="https://cdn-icons-png.flaticon.com/512/2334/2334465.png" width="120"><br><strong>Ganesha</strong>
            </div>
            <div onclick="playSloka('G8G8WwGX0Qc', 102)">
                <img src="https://cdn-icons-png.flaticon.com/512/3362/3362153.png" width="120"><br><strong>Saraswati</strong>
            </div>
        </div>
    </div>

    <div id="sloka-player-screen" class="screen">
        <div class="home-link" onclick="stopVideoAndHome()">üè† Home</div>
        <div id="player"></div>
        <button class="btn" onclick="showScreen('sloka-screen')">Back to Slokas</button>
    </div>

    <div id="tamil-category-screen" class="screen">
        <div class="home-link" onclick="showScreen('home-screen')">üè† Home</div>
        <h2>Pick a Category</h2>
        <select id="category-select" style="font-size: 1.5rem; padding: 15px; border-radius: 15px; margin: 20px;">
            <option value="fruits">Fruits (‡Æ™‡Æ¥‡Æô‡Øç‡Æï‡Æ≥‡Øç)</option>
            <option value="animals">Animals (‡Æµ‡Æø‡Æ≤‡Æô‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Øç)</option>
        </select>
        <button class="btn" style="background-color: var(--tamil-bg);" onclick="startTamil()">Go! ‚ñ∂Ô∏è</button>
    </div>

    <div id="tamil-screen" class="screen">
        <div class="home-link" onclick="showScreen('home-screen')">üè† Home</div>
        <div class="progress-container"><div id="progress-bar" class="progress-bar"></div></div>
        
        <div class="word-card">
            <img id="tamil-img" src="" class="word-img">
            <h2 id="eng-word" style="color: #1565C0; margin: 5px; font-size: 2rem;"></h2>
            
            <div id="speech-btn" class="play-btn-green" onclick="toggleSpeech()">
                <span id="btn-icon">‚ñ∂Ô∏è</span> <span id="btn-text">Play Tamil</span>
            </div>

            <h2 id="tam-word" style="color: #2E7D32; margin: 5px; font-size: 2.2rem;"></h2>
        </div>

        <button class="btn next-btn" onclick="nextWord()">Next ‚û°Ô∏è</button>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;
        let synth = window.speechSynthesis;
        
        // Comprehensive word list (10 each)
        const tamilData = {
            fruits: [
                { eng: "Apple", display: "‡ÆÜ‡Æ™‡Øç‡Æ™‡Æø‡Æ≥‡Øç", img: "https://cdn-icons-png.flaticon.com/512/415/415733.png" },
                { eng: "Mango", display: "‡ÆÆ‡Ææ‡ÆÆ‡Øç‡Æ™‡Æ¥‡ÆÆ‡Øç", img: "https://cdn-icons-png.flaticon.com/512/2909/2909787.png" },
                { eng: "Banana", display: "‡Æµ‡Ææ‡Æ¥‡Øà‡Æ™‡Øç‡Æ™‡Æ¥‡ÆÆ‡Øç", img: "https://cdn-icons-png.flaticon.com/512/2909/2909808.png" },
                { eng: "Grapes", display: "‡Æ§‡Æø‡Æ∞‡Ææ‡Æü‡Øç‡Æö‡Øà", img: "https://cdn-icons-png.flaticon.com/512/2909/2909761.png" },
                { eng: "Orange", display: "‡ÆÜ‡Æ∞‡Æû‡Øç‡Æö‡ØÅ", img: "https://cdn-icons-png.flaticon.com/512/2909/2909841.png" },
                { eng: "Pineapple", display: "‡ÆÖ‡Æ©‡Øç‡Æ©‡Ææ‡Æö‡Æø", img: "https://cdn-icons-png.flaticon.com/512/2909/2909893.png" },
                { eng: "Watermelon", display: "‡Æ§‡Æ∞‡Øç‡Æ™‡ØÇ‡Æö‡Æ£‡Æø", img: "https://cdn-icons-png.flaticon.com/512/2909/2909756.png" },
                { eng: "Papaya", display: "‡Æ™‡Æ™‡Øç‡Æ™‡Ææ‡Æ≥‡Æø", img: "https://cdn-icons-png.flaticon.com/512/2909/2909817.png" },
                { eng: "Pomegranate", display: "‡ÆÆ‡Ææ‡Æ§‡ØÅ‡Æ≥‡Øà", img: "https://cdn-icons-png.flaticon.com/512/2909/2909852.png" },
                { eng: "Guava", display: "‡Æï‡Øä‡ÆØ‡Øç‡ÆØ‡Ææ", img: "https://cdn-icons-png.flaticon.com/512/2909/2909772.png" }
            ],
            animals: [
                { eng: "Lion", display: "‡Æö‡Æø‡Æô‡Øç‡Æï‡ÆÆ‡Øç", img: "https://cdn-icons-png.flaticon.com/512/616/616412.png" },
                { eng: "Elephant", display: "‡ÆØ‡Ææ‡Æ©‡Øà", img: "https://cdn-icons-png.flaticon.com/512/375/375125.png" },
                { eng: "Tiger", display: "‡Æ™‡ØÅ‡Æ≤‡Æø", img: "https://cdn-icons-png.flaticon.com/512/616/616440.png" },
                { eng: "Cow", display: "‡Æ™‡Æö‡ØÅ", img: "https://cdn-icons-png.flaticon.com/512/1998/1998610.png" },
                { eng: "Dog", display: "‡Æ®‡Ææ‡ÆØ‡Øç", img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
                { eng: "Cat", display: "‡Æ™‡ØÇ‡Æ©‡Øà", img: "https://cdn-icons-png.flaticon.com/512/616/616430.png" },
                { eng: "Horse", display: "‡Æï‡ØÅ‡Æ§‡Æø‡Æ∞‡Øà", img: "https://cdn-icons-png.flaticon.com/512/1998/1998682.png" },
                { eng: "Monkey", display: "‡Æï‡ØÅ‡Æ∞‡Æô‡Øç‡Æï‡ØÅ", img: "https://cdn-icons-png.flaticon.com/512/616/616421.png" },
                { eng: "Rabbit", display: "‡ÆÆ‡ØÅ‡ÆØ‡Æ≤‡Øç", img: "https://cdn-icons-png.flaticon.com/512/616/616444.png" },
                { eng: "Deer", display: "‡ÆÆ‡Ææ‡Æ©‡Øç", img: "https://cdn-icons-png.flaticon.com/512/1998/1998592.png" }
            ]
        };

        let currentCategory = [];
        let currentIndex = 0;

        function showScreen(id) {
            synth.cancel();
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            resetSpeechButton();
        }

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', { height: '240', width: '320', videoId: 'G8G8WwGX0Qc' });
        }

        function playSloka(vid, time) {
            showScreen('sloka-player-screen');
            player.loadVideoById({videoId: vid, startSeconds: time});
        }

        function stopVideoAndHome() {
            player.stopVideo();
            showScreen('home-screen');
        }

        function startTamil() {
            currentCategory = tamilData[document.getElementById('category-select').value];
            currentIndex = 0;
            showScreen('tamil-screen');
            updateTamilCard();
        }

        function updateTamilCard() {
            const item = currentCategory[currentIndex];
            document.getElementById('tamil-img').src = item.img;
            document.getElementById('eng-word').innerText = item.eng;
            document.getElementById('tam-word').innerText = item.display;
            document.getElementById('progress-bar').style.width = ((currentIndex + 1) * 10) + "%";
            resetSpeechButton();
        }

        function toggleSpeech() {
            if (synth.speaking) {
                synth.cancel();
                resetSpeechButton();
            } else {
                const text = currentCategory[currentIndex].display;
                const utterance = new SpeechSynthesisUtterance(text);
                
                // Force Tamil Voice Selection
                const voices = synth.getVoices();
                const tamilVoice = voices.find(v => v.lang.includes('ta') || v.name.toLowerCase().includes('tamil'));
                
                if (tamilVoice) utterance.voice = tamilVoice;
                utterance.lang = 'ta-IN';
                utterance.rate = 1.0; // Normal Speed

                utterance.onstart = () => {
                    document.getElementById('btn-icon').innerText = "‚è∏Ô∏è";
                    document.getElementById('btn-text').innerText = "Pause";
                };

                utterance.onend = resetSpeechButton;
                utterance.onerror = resetSpeechButton;
                
                synth.speak(utterance);
            }
        }

        function resetSpeechButton() {
            document.getElementById('btn-icon').innerText = "‚ñ∂Ô∏è";
            document.getElementById('btn-text').innerText = "Play Tamil";
        }

        function nextWord() {
            if (currentIndex < currentCategory.length - 1) {
                currentIndex++;
                updateTamilCard();
            } else {
                alert("Super! You finished all words! üåü");
                showScreen('tamil-category-screen');
            }
        }

        // Initialize voices for mobile browsers
        window.speechSynthesis.getVoices();
    </script>
</body>
</html>
