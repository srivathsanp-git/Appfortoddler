<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Toddler Talk | English Flashcards</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@700;900&display=swap');

        :root {
            --ios-bg: #F2F2F7;
            --nike-black: #111111;
            --apple-blue: #007AFF;
            --success-green: #34C759;
            --card-shadow: 0 20px 40px rgba(0,0,0,0.1);
            --radius: 32px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0; background-color: var(--ios-bg); color: var(--nike-black);
            height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* Parental Gate */
        #parental-gate {
            display: none; position: fixed; inset: 0; background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            z-index: 2000; justify-content: center; align-items: center; flex-direction: column;
        }

        .screen { display: none; flex-direction: column; align-items: center; width: 100%; height: 100%; padding: 20px; }
        .active { display: flex; }

        .progress-header { width: 100%; max-width: 450px; margin-bottom: 15px; }
        .progress-meta { display: flex; justify-content: space-between; font-weight: 700; font-size: 1rem; color: #8E8E93; margin-bottom: 5px; }
        .progress-outer { height: 10px; background: #E5E5EA; border-radius: 5px; overflow: hidden; }
        .progress-inner { height: 100%; background: var(--apple-blue); width: 0%; transition: width 0.4s ease; }

        .main-card {
            background: white; width: 100%; max-width: 450px; border-radius: var(--radius);
            overflow: hidden; box-shadow: var(--card-shadow); flex: 1;
            display: flex; flex-direction: column; margin-bottom: 90px;
        }

        .img-container { width: 100%; height: 65%; background: #E5E5EA; position: relative; }
        .main-img { width: 100%; height: 100%; object-fit: cover; transition: opacity 0.3s; }

        .content { padding: 20px; text-align: center; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }
        .eng-txt { font-size: 3.5rem; font-weight: 900; margin: 0 0 15px 0; letter-spacing: -1px; }
        
        .play-bar {
            background: var(--apple-blue); color: white; padding: 20px; border-radius: 24px;
            display: flex; align-items: center; justify-content: center; gap: 12px;
            font-size: 1.4rem; font-weight: 800; cursor: pointer;
        }

        .next-btn {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: var(--nike-black); color: white; padding: 22px;
            border-radius: 50px; font-size: 1.3rem; font-weight: 800; width: 90%; max-width: 400px; border: none;
        }

        #celebration {
            display: none; position: fixed; inset: 0; background: white; z-index: 1000;
            flex-direction: column; justify-content: center; align-items: center; text-align: center;
        }

        .cat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; max-width: 500px; margin-top: 20px; }
        .cat-btn { background: white; padding: 35px 20px; border-radius: var(--radius); box-shadow: var(--card-shadow); font-weight: 700; font-size: 1.2rem; text-align: center; cursor: pointer; }
    </style>
</head>
<body>

    <div id="parental-gate">
        <h2 id="gate-q"></h2>
        <div id="gate-opts"></div>
    </div>

    <div id="home-screen" class="screen active">
        <h1 style="margin-top:60px; font-size: 2.5rem; font-weight: 900;">TODDLER TALK</h1>
        <p style="color: #8E8E93;">Choose a category to start</p>
        <div class="cat-grid">
            <div class="cat-btn" onclick="start('fruits')">üçì<br>Fruits</div>
            <div class="cat-btn" onclick="start('animals')">ü¶Å<br>Animals</div>
            <div class="cat-btn" onclick="start('moods')">üòä<br>Moods</div>
            <div class="cat-btn" onclick="start('actions')">‚ö°<br>Actions</div>
        </div>
    </div>

    <div id="app-screen" class="screen">
        <div class="progress-header">
            <div class="progress-meta">
                <span onclick="openGate()" style="cursor:pointer">üè† Home</span>
                <span id="prog-label"></span>
            </div>
            <div class="progress-outer"><div id="prog-bar" class="progress-inner"></div></div>
        </div>

        <div class="main-card">
            <div class="img-container">
                <img id="m-img" class="main-img" onerror="handleImageError(this)">
            </div>
            <div class="content">
                <div id="m-eng" class="eng-txt"></div>
                <div class="play-bar" onclick="speak()">
                    <span id="v-icon">üîä</span> <span id="v-label">SAY IT</span>
                </div>
            </div>
        </div>
        <button class="next-btn" onclick="next()">NEXT WORD</button>
    </div>

    <div id="celebration">
        <span style="font-size: 6rem;">üåü</span>
        <h1 style="font-size: 3rem; margin: 10px 0;">All Done!</h1>
        <button class="next-btn" style="position:static; margin-top: 20px;" onclick="location.reload()">START AGAIN</button>
    </div>

    <script>
        const synth = window.speechSynthesis;
        const db = {
            fruits: [
                {e:"Apple", i:"https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?w=600", alt:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?w=600"},
                {e:"Mango", i:"https://images.unsplash.com/photo-1553279768-865429fa0078?w=600", alt:"https://images.pexels.com/photos/2294471/pexels-photo-2294471.jpeg?w=600"},
                {e:"Banana", i:"https://images.unsplash.com/photo-1528825871115-3581a5387919?w=600", alt:"https://images.pexels.com/photos/2870882/pexels-photo-2870882.jpeg?w=600"},
                {e:"Grapes", i:"https://images.unsplash.com/photo-1537640538966-79f369143f8f?w=600", alt:"https://images.pexels.com/photos/708777/pexels-photo-708777.jpeg?w=600"},
                {e:"Orange", i:"https://images.unsplash.com/photo-1582979512210-99b6a53386f9?w=600", alt:"https://images.pexels.com/photos/161559/orange-fruit-vitamins-healthy-eating-161559.jpeg?w=600"},
                {e:"Pineapple", i:"https://images.unsplash.com/photo-1550258114-68bd299738ad?w=600", alt:"https://images.pexels.com/photos/947885/pexels-photo-947885.jpeg?w=600"},
                {e:"Watermelon", i:"https://images.unsplash.com/photo-1587049352846-4a222e784d38?w=600", alt:"https://images.pexels.com/photos/1313267/pexels-photo-1313267.jpeg?w=600"},
                {e:"Strawberry", i:"https://images.unsplash.com/photo-1464965911861-746a04b4bca6?w=600", alt:"https://images.pexels.com/photos/93405/pexels-photo-93405.jpeg?w=600"},
                {e:"Raspberry", i:"https://images.unsplash.com/photo-1534073828943-f801091bb18c?w=600", alt:"https://images.pexels.com/photos/59945/strawberry-fruit-berry-red-59945.jpeg?w=600"},
                {e:"Blueberry", i:"https://images.unsplash.com/photo-1498557850523-fd3d118b962e?w=600", alt:"https://images.pexels.com/photos/1128678/pexels-photo-1128678.jpeg?w=600"}
            ],
            animals: [
                {e:"Lion", i:"https://images.unsplash.com/photo-1546182990-dffeafbe841d?w=600", alt:"https://images.pexels.com/photos/33045/lion-wild-africa-african.jpg?w=600"},
                {e:"Elephant", i:"https://images.unsplash.com/photo-1557050543-4d5f4e07ef46?w=600", alt:"https://images.pexels.com/photos/66898/elephant-cub-tsavo-kenya-66898.jpeg?w=600"},
                {e:"Tiger", i:"https://images.unsplash.com/photo-1508817628294-5a453fa0b8fb?w=600", alt:"https://images.pexels.com/photos/41315/tiger-wildlife-animal-cat-41315.jpeg?w=600"},
                {e:"Cow", i:"https://images.unsplash.com/photo-1546445317-29f4545e9d53?w=600", alt:"https://images.pexels.com/photos/235731/pexels-photo-235731.jpeg?w=600"},
                {e:"Dog", i:"https://images.unsplash.com/photo-1517849845537-4d257902454a?w=600", alt:"https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg?w=600"},
                {e:"Cat", i:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=600", alt:"https://images.pexels.com/photos/45201/kitty-cat-kitten-pet-45201.jpeg?w=600"},
                {e:"Horse", i:"https://images.unsplash.com/photo-1553284965-83fd3e82fa5a?w=600", alt:"https://images.pexels.com/photos/52500/horse-herd-fog-nature-52500.jpeg?w=600"},
                {e:"Monkey", i:"https://images.unsplash.com/photo-1540573133985-87b6da6d54a9?w=600", alt:"https://images.pexels.com/photos/1138460/pexels-photo-1138460.jpeg?w=600"},
                {e:"Rabbit", i:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=600", alt:"https://images.pexels.com/photos/372166/pexels-photo-372166.jpeg?w=600"},
                {e:"Deer", i:"https://images.unsplash.com/photo-1484406566174-9da000fd267c?w=600", alt:"https://images.pexels.com/photos/162203/deer-wildlife-nature.jpeg?w=600"}
            ],
            moods: [
                {e:"Happy", i:"https://images.unsplash.com/photo-1502541229470-761741e7360b?w=600", alt:"https://images.pexels.com/photos/161551/child-mother-daughter-love-161551.jpeg?w=600"},
                {e:"Sad", i:"https://images.unsplash.com/photo-1471286174890-9c112ffca5b4?w=600", alt:"https://images.pexels.com/photos/35537/child-children-girl-sad.jpg?w=600"},
                {e:"Excited", i:"https://images.unsplash.com/photo-1519238263530-99bdd11df2ea?w=600", alt:"https://images.pexels.com/photos/1493111/pexels-photo-1493111.jpeg?w=600"},
                {e:"Angry", i:"https://images.unsplash.com/photo-1577467261905-64582f34f783?w=600", alt:"https://images.pexels.com/photos/3806742/pexels-photo-3806742.jpeg?w=600"},
                {e:"Scared", i:"https://images.unsplash.com/photo-1542034176-599a0a4c07d3?w=600", alt:"https://images.pexels.com/photos/6320092/pexels-photo-6320092.jpeg?w=600"},
                {e:"Tired", i:"https://images.unsplash.com/photo-1511289081-d06dba19bfbd?w=600", alt:"https://images.pexels.com/photos/3845492/pexels-photo-3845492.jpeg?w=600"}
            ],
            actions: [
                {e:"Run", i:"https://images.unsplash.com/photo-1530143311094-34d807799e8f?w=600", alt:"https://images.pexels.com/photos/607490/pexels-photo-607490.jpeg?w=600"},
                {e:"Jump", i:"https://images.unsplash.com/photo-1516541196182-6bdb0516ed27?w=600", alt:"https://images.pexels.com/photos/1261427/pexels-photo-1261427.jpeg?w=600"},
                {e:"Eat", i:"https://images.unsplash.com/photo-1511690656952-34342bb7c2f2?w=600", alt:"https://images.pexels.com/photos/1148496/pexels-photo-1148496.jpeg?w=600"},
                {e:"Sleep", i:"https://images.unsplash.com/photo-1520206183501-b80af970d8c3?w=600", alt:"https://images.pexels.com/photos/914910/pexels-photo-914910.jpeg?w=600"},
                {e:"Drink", i:"https://images.unsplash.com/photo-1556767667-0716dc366f6f?w=600", alt:"https://images.pexels.com/photos/1188383/pexels-photo-1188383.jpeg?w=600"},
                {e:"Laugh", i:"https://images.unsplash.com/photo-1516627145497-ae6968895b74?w=600", alt:"https://images.pexels.com/photos/1110271/pexels-photo-1110271.jpeg?w=600"}
            ]
        };

        let set = [], idx = 0;

        function handleImageError(img) {
            const item = set[idx];
            if (img.src !== item.alt) { img.src = item.alt; } 
            else { img.src = `https://ui-avatars.com/api/?name=${item.e}&background=random&size=512`; }
        }

        function start(c) {
            set = db[c]; idx = 0;
            document.getElementById('home-screen').classList.remove('active');
            document.getElementById('app-screen').classList.add('active');
            update();
        }

        function update() {
            const item = set[idx];
            const img = document.getElementById('m-img');
            img.style.opacity = 0;
            img.src = item.i;
            img.onload = () => img.style.opacity = 1;
            
            document.getElementById('m-eng').innerText = item.e;
            
            const p = ((idx + 1) / set.length) * 100;
            document.getElementById('prog-bar').style.width = p + '%';
            document.getElementById('prog-label').innerText = `${idx + 1} / ${set.length}`;
            reset();
        }

        function speak() {
            if(synth.speaking) { synth.cancel(); reset(); return; }
            const u = new SpeechSynthesisUtterance(set[idx].e);
            u.lang = 'en-US'; u.rate = 0.9; // Slightly slower for learning
            u.onstart = () => { document.getElementById('v-icon').innerText = "‚è∏"; document.getElementById('v-label').innerText = "STOP"; };
            u.onend = reset;
            synth.speak(u);
        }

        function reset() { document.getElementById('v-icon').innerText = "üîä"; document.getElementById('v-label').innerText = "SAY IT"; }

        function next() {
            if(idx < set.length - 1) { idx++; update(); }
            else { document.getElementById('celebration').style.display = 'flex'; }
        }

        function openGate() {
            const n1 = Math.floor(Math.random()*5)+1, n2 = Math.floor(Math.random()*5)+1, ans = n1+n2;
            document.getElementById('gate-q').innerText = `Parents: ${n1} + ${n2} = ?`;
            const o = document.getElementById('gate-opts'); o.innerHTML = '';
            [ans, ans+1, ans+2].sort(()=>Math.random()-0.5).forEach(n => {
                const b = document.createElement('button');
                b.style.cssText = "padding:15px 30px; margin:10px; border-radius:12px; border:none; background:var(--apple-blue); color:white; font-weight:700;";
                b.innerText = n;
                b.onclick = () => n === ans ? location.reload() : alert("Try again!");
                o.appendChild(b);
            });
            document.getElementById('parental-gate').style.display = 'flex';
        }
    </script>
</body>
</html>
